<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TetriCycle: Powerup Creation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="main.html">TetriCycle</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1><a class="el" href="class_powerup.html" title="The base class for powerups.">Powerup</a> Creation </h1>  </div>
</div>
<div class="contents">
<h2><a class="anchor" id="powerupnamesection"></a>
Powerup Name</h2>
<p>Choose a clever name for your powerup, such as 'clevername'.</p>
<h2><a class="anchor" id="powerupimgsection"></a>
Powerup Image</h2>
<ul>
<li>
Select a PNG image to represent your powerup. Try to keep it small (in order to reduce the size of the executable). <br/>
 Resize the image to 32x32; if it doesn't look good, try 64x64. </li>
<li>
Name the file 'powerup_clevername.png' and put the file in the following directory: <br/>
 <b>/ext/libwiigui/images</b> </li>
<li>
Now you must add a declaration for your powerup image. Open the following <a href="file:">file:</a> <br/>
 <b>/ext/libwiigui/filelist.h</b> <br/>
 Look for the comment 'powerup image declarations go here' and add the following lines: <br/>
 (note: please keep powerups in alphabetical order) <ul>
<li>
<b>extern const u8 powerup_clevername_png[];</b> </li>
<li>
<b>extern const u32 powerup_clevername_png_size;</b> </li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="powerupsoundsection"></a>
Powerup Sound (optional)</h2>
<p>Selecting a sound to represent your powerup is optional; if you don't provide one, a default sound will be played. </p>
<ul>
<li>
Select a sound to represent your powerup. The sample should be no more than a couple seconds long. </li>
<li>
Convert your sound sample to the following format: <br/>
 <b>PCM signed 16 bit, big endian, stereo (raw) at 44100 Hz</b> <ul>
<li>
GoldWave is a good program for converting to .pcm format. </li>
<li>
If converting from .wav to .pcm, you may have to resample at 44100 Hz. </li>
<li>
I found that if I convert from .wav to .ogg or .mp3, then convert to .pcm, it's automatically sampled at the correct frequency. </li>
</ul>
</li>
<li>
Name the file 'powerup_clevername.pcm' and put the file in the following directory: <br/>
 <b>/ext/libwiigui/sounds</b> </li>
<li>
Now you must add a declaration for your powerup sound. Open the following <a href="file:">file:</a> <br/>
 <b>/ext/libwiigui/filelist.h</b> <br/>
 Look for the comment 'powerup sound declarations go here' and add the following lines: <br/>
 (note: please keep powerups in alphabetical order) <ul>
<li>
<b>extern const u8 powerup_clevername_pcm[];</b> </li>
<li>
<b>extern const u32 powerup_clevername_pcm_size;</b> </li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="powerupcodefilessection"></a>
Powerup Code Files</h2>
<p>Now you're ready to write the header file and source file. There are templates located in: <br/>
 <b>/templates/Powerup</b> <br/>
 You could copy these templates and modify them by hand, but I wrote a script that does it for you; simply run <b>Powerup.exe</b> and follow the on-screen instructions (if you're paranoid, you can compile the program from the source).</p>
<ul>
<li>Move the generated header file to: <br/>
 <b>/code/include/powerups</b></li>
<li>Move the generated source file to: <br/>
 <b>/code/source/powerups</b></li>
<li>If you added a sound for your powerup, uncomment the optional sound code in the header file and source file.</li>
<li>The only functions you need to implement are StartEffect and StopEffect (located in the source file).</li>
<li>Your powerup is automagically added to the game menu.</li>
</ul>
<h2><a class="anchor" id="powerupoverridessection"></a>
Optional Overrides</h2>
<p>By default powerups last for 10000 milliseconds and only affect one player. You can override this default behavior by providing definitions for the GetDuration and GetTargetType functions in the powerup header file. <br/>
 There are 3 target types: <br/>
</p>
<ul>
<li><b>POWERUP_TARGET_ONE</b> - Affects the target player.</li>
<li><b>POWERUP_TARGET_ALL</b> - Affects all players.</li>
<li><b>POWERUP_TARGET_ALL_BUT_ONE</b> - Affects all but the target player.</li>
</ul>
<h2><a class="anchor" id="powerupbehaviorsection"></a>
Powerup Behavior</h2>
<p>Now comes the hardest part: implementing the actual powerup behavior. As mentioned previously, you only need to implement the StartEffect and StopEffect functions in the powerup source file. Look at the other powerup classes for examples. In general, you will have to add a state flag to Player::PlayerPowerupData. StartEffect will turn the flag on, and StopEffect will turn the flag off; some piece of game logic will operate differently while the flag is turned on. Good luck, you can do it! </p>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Oct 20 2010 17:06:59 for TetriCycle by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
